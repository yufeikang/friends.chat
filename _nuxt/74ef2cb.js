(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{359:function(t,e,n){"use strict";n(49),n(10),n(5),n(11),n(13);var r=n(2),o=n(16),c=n(17),l=n(23),f=n(21),d=n(12),h=n(4),v=(n(9),n(41),n(31),n(0)),m=n(30),y=n(54),w=n(174);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var O=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){Object(l.a)(n,t);var e=_(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"title",get:function(){return""}},{key:"description",get:function(){return""}},{key:"appbar",get:function(){return{}}},{key:"resetAppbar",value:function(){this.setAppbar({title:"",style:"",show:!0,back:!0,home:!1,dark:!0,color:"#111"})}},{key:"setLang",value:function(){var t="en",e=navigator.language;e.includes("zh")?t=e.includes("zh-TW")||e.includes("zh-HK")?"zhTW":"zh":e.includes("es")?t="es":e.includes("ja")?t="ja":e.includes("de")&&(t="de"),this.$i18n.locale=t,document.title=this.title}},{key:"setPage",value:function(){this.setAppbar(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({title:this.title},this.appbar)),setTimeout((function(){Object(w.b)()}),50)}},{key:"beforeDestroy",value:function(){this.resetAppbar()}}]),n}(v.a);O([Object(y.a)("app/SET_APPBAR")],x.prototype,"setAppbar",void 0),x=O([Object(m.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},beforeRouteEnter:function(t,e,n){n((function(t){t.setLang(),t.setPage()}))}})],x),e.a=x},363:function(t,e,n){for(var r,o=n(27),c=n(66),l=n(94),f=l("typed_array"),d=l("view"),h=!(!o.ArrayBuffer||!o.DataView),v=h,i=0,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i<9;)(r=o[m[i++]])?(c(r.prototype,f,!0),c(r.prototype,d,!0)):v=!1;t.exports={ABV:h,CONSTR:v,TYPED:f,VIEW:d}},364:function(t,e,n){var r=n(93),o=n(52);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},365:function(t,e,n){var content=n(392);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("71e71370",content,!0,{sourceMap:!1})},366:function(t,e,n){var content=n(394);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("45bd16f5",content,!0,{sourceMap:!1})},387:function(t,e,n){n(388)("Float32",4,(function(t){return function(data,e,n){return t(this,data,e,n)}}))},388:function(t,e,n){"use strict";if(n(42)){var r=n(95),o=n(27),c=n(33),l=n(19),f=n(363),d=n(389),h=n(69),v=n(136),m=n(97),y=n(66),w=n(137),k=n(93),_=n(52),O=n(364),x=n(135),C=n(112),j=n(68),A=n(113),S=n(36),R=n(67),M=n(176),P=n(99),E=n(223),T=n(96).f,N=n(177),D=n(94),I=n(28),U=n(114),F=n(175),$=n(139),B=n(178),V=n(101),L=n(138),W=n(140),z=n(222),J=n(390),Y=n(44),H=n(100),G=Y.f,K=H.f,Z=o.RangeError,Q=o.TypeError,X=o.Uint8Array,tt="ArrayBuffer",et="SharedArrayBuffer",nt="BYTES_PER_ELEMENT",it=Array.prototype,ot=d.ArrayBuffer,at=d.DataView,ct=U(0),st=U(2),ut=U(3),lt=U(4),ft=U(5),pt=U(6),ht=F(!0),vt=F(!1),mt=B.values,yt=B.keys,gt=B.entries,bt=it.lastIndexOf,wt=it.reduce,kt=it.reduceRight,_t=it.join,Ot=it.sort,xt=it.slice,Ct=it.toString,jt=it.toLocaleString,At=I("iterator"),St=I("toStringTag"),Rt=D("typed_constructor"),Mt=D("def_constructor"),Pt=f.CONSTR,Et=f.TYPED,Tt=f.VIEW,Nt="Wrong length!",Dt=U(1,(function(t,e){return Bt($(t,t[Mt]),e)})),It=c((function(){return 1===new X(new Uint16Array([1]).buffer)[0]})),Ut=!!X&&!!X.prototype.set&&c((function(){new X(1).set({})})),Ft=function(t,e){var n=k(t);if(n<0||n%e)throw Z("Wrong offset!");return n},$t=function(t){if(S(t)&&Et in t)return t;throw Q(t+" is not a typed array!")},Bt=function(t,e){if(!S(t)||!(Rt in t))throw Q("It is not a typed array constructor!");return new t(e)},Vt=function(t,e){return Lt($(t,t[Mt]),e)},Lt=function(t,e){for(var n=0,r=e.length,o=Bt(t,r);r>n;)o[n]=e[n++];return o},Wt=function(t,e,n){G(t,e,{get:function(){return this._d[n]}})},zt=function(source){var i,t,e,n,r,o,c=R(source),l=arguments.length,f=l>1?arguments[1]:void 0,d=void 0!==f,v=N(c);if(null!=v&&!M(v)){for(o=v.call(c),e=[],i=0;!(r=o.next()).done;i++)e.push(r.value);c=e}for(d&&l>2&&(f=h(f,arguments[2],2)),i=0,t=_(c.length),n=Bt(this,t);t>i;i++)n[i]=d?f(c[i],i):c[i];return n},Jt=function(){for(var t=0,e=arguments.length,n=Bt(this,e);e>t;)n[t]=arguments[t++];return n},qt=!!X&&c((function(){jt.call(new X(1))})),Yt=function(){return jt.apply(qt?xt.call($t(this)):$t(this),arguments)},Ht={copyWithin:function(t,e){return J.call($t(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return lt($t(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return z.apply($t(this),arguments)},filter:function(t){return Vt(this,st($t(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return ft($t(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return pt($t(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){ct($t(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return vt($t(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ht($t(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return _t.apply($t(this),arguments)},lastIndexOf:function(t){return bt.apply($t(this),arguments)},map:function(t){return Dt($t(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return wt.apply($t(this),arguments)},reduceRight:function(t){return kt.apply($t(this),arguments)},reverse:function(){for(var t,e=this,n=$t(e).length,r=Math.floor(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return ut($t(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Ot.call($t(this),t)},subarray:function(t,e){var n=$t(this),r=n.length,o=x(t,r);return new($(n,n[Mt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,_((void 0===e?r:x(e,r))-o))}},Gt=function(t,e){return Vt(this,xt.call($t(this),t,e))},Kt=function(t){$t(this);var e=Ft(arguments[1],1),n=this.length,r=R(t),o=_(r.length),c=0;if(o+e>n)throw Z(Nt);for(;c<o;)this[e+c]=r[c++]},Zt={entries:function(){return gt.call($t(this))},keys:function(){return yt.call($t(this))},values:function(){return mt.call($t(this))}},Qt=function(t,e){return S(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Xt=function(t,e){return Qt(t,e=C(e,!0))?m(2,t[e]):K(t,e)},te=function(t,e,desc){return!(Qt(t,e=C(e,!0))&&S(desc)&&j(desc,"value"))||j(desc,"get")||j(desc,"set")||desc.configurable||j(desc,"writable")&&!desc.writable||j(desc,"enumerable")&&!desc.enumerable?G(t,e,desc):(t[e]=desc.value,t)};Pt||(H.f=Xt,Y.f=te),l(l.S+l.F*!Pt,"Object",{getOwnPropertyDescriptor:Xt,defineProperty:te}),c((function(){Ct.call({})}))&&(Ct=jt=function(){return _t.call(this)});var ee=w({},Ht);w(ee,Zt),y(ee,At,Zt.values),w(ee,{slice:Gt,set:Kt,constructor:function(){},toString:Ct,toLocaleString:Yt}),Wt(ee,"buffer","b"),Wt(ee,"byteOffset","o"),Wt(ee,"byteLength","l"),Wt(ee,"length","e"),G(ee,St,{get:function(){return this[Et]}}),t.exports=function(t,e,n,d){var h=t+((d=!!d)?"Clamped":"")+"Array",m="get"+t,w="set"+t,k=o[h],x=k||{},C=k&&E(k),j=!k||!f.ABV,R={},M=k&&k.prototype,N=function(t,n){G(t,n,{get:function(){return function(t,n){var data=t._d;return data.v[m](n*e+data.o,It)}(this,n)},set:function(t){return function(t,n,r){var data=t._d;d&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),data.v[w](n*e+data.o,r,It)}(this,n,t)},enumerable:!0})};j?(k=n((function(t,data,n,r){v(t,k,h,"_d");var o,c,l,f,d=0,m=0;if(S(data)){if(!(data instanceof ot||(f=A(data))==tt||f==et))return Et in data?Lt(k,data):zt.call(k,data);o=data,m=Ft(n,e);var w=data.byteLength;if(void 0===r){if(w%e)throw Z(Nt);if((c=w-m)<0)throw Z(Nt)}else if((c=_(r)*e)+m>w)throw Z(Nt);l=c/e}else l=O(data),o=new ot(c=l*e);for(y(t,"_d",{b:o,o:m,l:c,e:l,v:new at(o)});d<l;)N(t,d++)})),M=k.prototype=P(ee),y(M,"constructor",k)):c((function(){k(1)}))&&c((function(){new k(-1)}))&&L((function(t){new k,new k(null),new k(1.5),new k(t)}),!0)||(k=n((function(t,data,n,r){var o;return v(t,k,h),S(data)?data instanceof ot||(o=A(data))==tt||o==et?void 0!==r?new x(data,Ft(n,e),r):void 0!==n?new x(data,Ft(n,e)):new x(data):Et in data?Lt(k,data):zt.call(k,data):new x(O(data))})),ct(C!==Function.prototype?T(x).concat(T(C)):T(x),(function(t){t in k||y(k,t,x[t])})),k.prototype=M,r||(M.constructor=k));var D=M[At],I=!!D&&("values"==D.name||null==D.name),U=Zt.values;y(k,Rt,!0),y(M,Et,h),y(M,Tt,!0),y(M,Mt,k),(d?new k(1)[St]==h:St in M)||G(M,St,{get:function(){return h}}),R[h]=k,l(l.G+l.W+l.F*(k!=x),R),l(l.S,h,{BYTES_PER_ELEMENT:e}),l(l.S+l.F*c((function(){x.of.call(k,1)})),h,{from:zt,of:Jt}),nt in M||y(M,nt,e),l(l.P,h,Ht),W(h),l(l.P+l.F*Ut,h,{set:Kt}),l(l.P+l.F*!I,h,Zt),r||M.toString==Ct||(M.toString=Ct),l(l.P+l.F*c((function(){new k(1).slice()})),h,{slice:Gt}),l(l.P+l.F*(c((function(){return[1,2].toLocaleString()!=new k([1,2]).toLocaleString()}))||!c((function(){M.toLocaleString.call([1,2])}))),h,{toLocaleString:Yt}),V[h]=I?D:U,r||I||y(M,At,U)}}else t.exports=function(){}},389:function(t,e,n){"use strict";var r=n(27),o=n(42),c=n(95),l=n(363),f=n(66),d=n(137),h=n(33),v=n(136),m=n(93),y=n(52),w=n(364),k=n(96).f,_=n(44).f,O=n(222),x=n(98),C="ArrayBuffer",j="DataView",A="Wrong index!",S=r.ArrayBuffer,R=r.DataView,M=r.Math,P=r.RangeError,E=r.Infinity,T=S,N=M.abs,D=M.pow,I=M.floor,U=M.log,F=M.LN2,$="buffer",B="byteLength",V="byteOffset",L=o?"_b":$,W=o?"_l":B,z=o?"_o":V;function J(t,e,n){var r,o,c,l=new Array(n),f=8*n-e-1,d=(1<<f)-1,h=d>>1,rt=23===e?D(2,-24)-D(2,-77):0,i=0,s=t<0||0===t&&1/t<0?1:0;for((t=N(t))!=t||t===E?(o=t!=t?1:0,r=d):(r=I(U(t)/F),t*(c=D(2,-r))<1&&(r--,c*=2),(t+=r+h>=1?rt/c:rt*D(2,1-h))*c>=2&&(r++,c/=2),r+h>=d?(o=0,r=d):r+h>=1?(o=(t*c-1)*D(2,e),r+=h):(o=t*D(2,h-1)*D(2,e),r=0));e>=8;l[i++]=255&o,o/=256,e-=8);for(r=r<<e|o,f+=e;f>0;l[i++]=255&r,r/=256,f-=8);return l[--i]|=128*s,l}function Y(t,e,n){var r,o=8*n-e-1,c=(1<<o)-1,l=c>>1,f=o-7,i=n-1,s=t[i--],d=127&s;for(s>>=7;f>0;d=256*d+t[i],i--,f-=8);for(r=d&(1<<-f)-1,d>>=-f,f+=e;f>0;r=256*r+t[i],i--,f-=8);if(0===d)d=1-l;else{if(d===c)return r?NaN:s?-E:E;r+=D(2,e),d-=l}return(s?-1:1)*r*D(2,d-e)}function H(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function G(t){return[255&t]}function K(t){return[255&t,t>>8&255]}function Z(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function Q(t){return J(t,52,8)}function X(t){return J(t,23,4)}function tt(t,e,n){_(t.prototype,e,{get:function(){return this[n]}})}function et(view,t,e,n){var r=w(+e);if(r+t>view[W])throw P(A);var o=view[L]._b,c=r+view[z],l=o.slice(c,c+t);return n?l:l.reverse()}function nt(view,t,e,n,r,o){var c=w(+e);if(c+t>view[W])throw P(A);for(var l=view[L]._b,f=c+view[z],d=n(+r),i=0;i<t;i++)l[f+i]=d[o?i:t-i-1]}if(l.ABV){if(!h((function(){S(1)}))||!h((function(){new S(-1)}))||h((function(){return new S,new S(1.5),new S(NaN),S.name!=C}))){for(var it,ot=(S=function(t){return v(this,S),new T(w(t))}).prototype=T.prototype,at=k(T),ct=0;at.length>ct;)(it=at[ct++])in S||f(S,it,T[it]);c||(ot.constructor=S)}var view=new R(new S(2)),st=R.prototype.setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||d(R.prototype,{setInt8:function(t,e){st.call(this,t,e<<24>>24)},setUint8:function(t,e){st.call(this,t,e<<24>>24)}},!0)}else S=function(t){v(this,S,C);var e=w(t);this._b=O.call(new Array(e),0),this[W]=e},R=function(t,e,n){v(this,R,j),v(t,S,j);var r=t[W],o=m(e);if(o<0||o>r)throw P("Wrong offset!");if(o+(n=void 0===n?r-o:y(n))>r)throw P("Wrong length!");this[L]=t,this[z]=o,this[W]=n},o&&(tt(S,B,"_l"),tt(R,$,"_b"),tt(R,B,"_l"),tt(R,V,"_o")),d(R.prototype,{getInt8:function(t){return et(this,1,t)[0]<<24>>24},getUint8:function(t){return et(this,1,t)[0]},getInt16:function(t){var e=et(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=et(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return H(et(this,4,t,arguments[1]))},getUint32:function(t){return H(et(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return Y(et(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return Y(et(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){nt(this,1,t,G,e)},setUint8:function(t,e){nt(this,1,t,G,e)},setInt16:function(t,e){nt(this,2,t,K,e,arguments[2])},setUint16:function(t,e){nt(this,2,t,K,e,arguments[2])},setInt32:function(t,e){nt(this,4,t,Z,e,arguments[2])},setUint32:function(t,e){nt(this,4,t,Z,e,arguments[2])},setFloat32:function(t,e){nt(this,4,t,X,e,arguments[2])},setFloat64:function(t,e){nt(this,8,t,Q,e,arguments[2])}});x(S,C),x(R,j),f(R.prototype,l.VIEW,!0),e.ArrayBuffer=S,e.DataView=R},390:function(t,e,n){"use strict";var r=n(67),o=n(135),c=n(52);t.exports=[].copyWithin||function(t,e){var n=r(this),l=c(n.length),f=o(t,l),d=o(e,l),h=arguments.length>2?arguments[2]:void 0,v=Math.min((void 0===h?l:o(h,l))-d,l-f),m=1;for(d<f&&f<d+v&&(m=-1,d+=v-1,f+=v-1);v-- >0;)d in n?n[f]=n[d]:delete n[f],f+=m,d+=m;return n}},391:function(t,e,n){"use strict";n(365)},392:function(t,e,n){var r=n(14)(!1);r.push([t.i,".user-card[data-v-22a8cfb5]{border-radius:20px;width:100%;background:rgba(0,0,0,.3);box-shadow:0 0 20px rgba(0,0,0,.3);position:relative;overflow:hidden}.user-card .top[data-v-22a8cfb5]{justify-content:space-between;position:absolute;top:0;left:0;right:0}.user-card .top .nickname[data-v-22a8cfb5]{word-break:break-all}.user-card .canvas-wrapper[data-v-22a8cfb5]{height:100px}.user-card .canvas-wrapper .canvas[data-v-22a8cfb5]{width:100%;height:100%;border-radius:20px}",""]),t.exports=r},393:function(t,e,n){"use strict";n(366)},394:function(t,e,n){var r=n(14)(!1);r.push([t.i,".mute-all-btn[data-v-7612d705]{bottom:0;position:absolute;margin:0 16px 68px 0;box-shadow:0 0 20px hsla(0,0%,100%,.08)}.cards[data-v-7612d705]{display:flex;flex-direction:row;flex-wrap:wrap}.hint-box[data-v-7612d705]{color:hsla(0,0%,100%,.7);border-radius:20px;background:linear-gradient(-15deg,hsla(0,0%,100%,.12),hsla(0,0%,100%,.1))}.hint-box.empty-hint[data-v-7612d705]{background:linear-gradient(-15deg,#90f,#0057fa)!important}.hint-box.error-hint[data-v-7612d705]{background:linear-gradient(-15deg,#ec5700,#be1d00)!important}",""]),t.exports=r},398:function(t,e,n){"use strict";n.r(e);n(49);var r=n(16),o=n(17),c=n(23),l=n(21),f=n(12),d=n(4),h=(n(9),n(41),n(31),n(32),n(25),n(22),n(50),n(30)),v=n(54),m=n(361),y=n(359),w=n(18),k=(n(45),n(61),"https://chat-rpc.dev-proxy.site"),_=n(141),O=(n(53),{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var t,e,n,r,o,c,l,output="",i=0;for(input=O._utf8_encode(input);i<input.length;)r=(t=input.charCodeAt(i++))>>2,o=(3&t)<<4|(e=input.charCodeAt(i++))>>4,c=(15&e)<<2|(n=input.charCodeAt(i++))>>6,l=63&n,isNaN(e)?c=l=64:isNaN(n)&&(l=64),output=output+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(c)+this._keyStr.charAt(l);return output},decode:function(input){var t,e,n,r,o,c,output="",i=0;for(input=input.replace(/[^A-Za-z0-9+/=]/g,"");i<input.length;)t=this._keyStr.indexOf(input.charAt(i++))<<2|(r=this._keyStr.indexOf(input.charAt(i++)))>>4,e=(15&r)<<4|(o=this._keyStr.indexOf(input.charAt(i++)))>>2,n=(3&o)<<6|(c=this._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(t),64!==o&&(output+=String.fromCharCode(e)),64!==c&&(output+=String.fromCharCode(n));return output=O._utf8_decode(output)},_utf8_encode:function(t){var e="";t=t.replace(/\r\n/g,"\n");for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){var e,n,r,o="",i=0;for(e=n=0;i<t.length;)(e=t.charCodeAt(i))<128?(o+=String.fromCharCode(e),i++):e>191&&e<224?(n=t.charCodeAt(i+1),o+=String.fromCharCode((31&e)<<6|63&n),i+=2):(n=t.charCodeAt(i+1),r=t.charCodeAt(i+2),o+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&r),i+=3);return o}}),x=O,C={audio:!0,video:!1},j={urls:"turn:35.235.85.40:443",username:"webrtc",credential:"turnpassword"},A={iceServers:[],iceTransportPolicy:"relay",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},S=new(window.AudioContext||window.webkitAudioContext),R="",M="",P="",E="",T="",N=function(t,e,n,r,o,c){},D=function(t){},I=function(t){},U=function(t){},F=null,$=!1;function B(t,e,n,r,o,c,l){var f=n+":"+x.encode(e);E=encodeURIComponent(t),T=encodeURIComponent(f),M=n,N=r,D=o,U=c,I=l,P=e,$=!0,J()}function V(t,e){return L.apply(this,arguments)}function L(){return(L=Object(w.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k,t.prev=1,t.next=4,fetch("https://chat-rpc.dev-proxy.site",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({id:Object(_.b)(),method:e,params:n})});case 4:return r=t.sent,t.abrupt("return",r.json());case 8:return t.prev=8,t.t0=t.catch(1),console.log("fetch error",e,n,t.t0),t.next=13,V(e,n);case 13:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.finish(14);case 16:case"end":return t.stop()}}),t,null,[[1,8,14,16]])})))).apply(this,arguments)}function W(t){return z.apply(this,arguments)}function z(){return(z=Object(w.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V("subscribe",[E,T,R]);case 2:if(!(n=t.sent).hasOwnProperty("error")){t.next=7;break}return console.log("try to reconnect",n.error.description),U&&U(n.error).then((function(){$&&(console.log("reconnect in 0.5s"),setTimeout(Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.close(),t.next=3,J();case 3:case"end":return t.stop()}}),t)}))),500))})),t.abrupt("return");case 7:if(!n.data||"offer"!==n.data.type){t.next=18;break}return console.log("subscribe offer",n.data),t.next=11,e.setRemoteDescription(n.data);case 11:return t.next=13,e.createAnswer();case 13:return r=t.sent,t.next=16,e.setLocalDescription(r);case 16:return t.next=18,V("answer",[E,T,R,JSON.stringify(r)]);case 18:setTimeout((function(){W(e)}),3e3);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return Y.apply(this,arguments)}function Y(){return(Y=Object(w.a)(regeneratorRuntime.mark((function t(){var e,n,r,source,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,V("turn",[M]);case 5:e=t.sent,A.iceServers=e.data,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("failed to get server",t.t0),A.iceServers=[j];case 13:return t.prev=13,document.querySelectorAll(".peer").forEach((function(t){return t.remove()})),(F=new RTCPeerConnection(A)).createDataChannel("chat"),F.onicecandidate=function(t){var e=t.candidate;V("trickle",[E,T,R,JSON.stringify(e)])},F.ontrack=function(t){console.log("ontrack",t);var e=t.streams[0],n=decodeURIComponent(e.id),r=n.split(":")[0],o=n.split(":")[1];try{o=x.decode(o)}catch(t){console.log("failed to decode name",o,t)}if(r!==M){t.track.onmute=function(t){if(D){var e=t.target.id;console.log("onmute",e,t),D(e)}};var c=S.createAnalyser();if(c.fftSize=256,c.minDecibels=-80,c.maxDecibels=-10,c.smoothingTimeConstant=.85,S.createMediaStreamSource(e).connect(c),N){var l=t.track.id;N(F,e,c,l,r,o)}}},t.prev=19,t.next=22,navigator.mediaDevices.getUserMedia(C);case 22:n=t.sent,t.next=30;break;case 25:return t.prev=25,t.t1=t.catch(19),console.error(t.t1),I&&I(t.t1),t.abrupt("return");case 30:return(r=S.createAnalyser()).fftSize=256,r.minDecibels=-80,r.maxDecibels=-10,r.smoothingTimeConstant=.85,source=S.createMediaStreamSource(n),(o=S.createGain()).gain.value=.01,source.connect(r),r.connect(o),o.connect(S.destination),N&&N(F,n,r,"me",M,P),S.resume(),n.getTracks().forEach((function(track){F.addTrack(track,n)})),t.t2=F,t.next=47,F.createOffer();case 47:return t.t3=t.sent,t.next=50,t.t2.setLocalDescription.call(t.t2,t.t3);case 50:return t.next=52,V("publish",[E,T,JSON.stringify(F.localDescription)]);case 52:if(c=t.sent,console.log(c),!c.data||"answer"!==c.data.sdp.type){t.next=59;break}return t.next=57,F.setRemoteDescription(c.data.sdp);case 57:R=c.data.track,W(F);case 59:t.next=64;break;case 61:t.prev=61,t.t4=t.catch(13),I&&I(t.t4);case 64:case"end":return t.stop()}}),t,null,[[2,9],[13,61],[19,25]])})))).apply(this,arguments)}var H={onCopy:function(t){t.$toast({message:t.$t("common.copy_succ_hint"),color:"info"})},onError:function(t){}};n(387);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var K=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},Z=function(t){Object(c.a)(n,t);var e=G(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"mounted",value:function(){var t=this;setTimeout((function(){"me"!==t.user.trackId&&(t.$refs.audio.srcObject=t.user.stream);t.visualize(t.user.uid,t.user.analyser)}),200)}},{key:"editName",value:function(){this.$emit("edit-name",this.user)}},{key:"handleMutable",value:function(){this.user.isMuted?this.$emit("unmute",this.user):this.$emit("mute",this.user)}},{key:"visualize",value:function(t,e){var canvas=this.$refs.canvas;canvas.width=canvas.width*window.devicePixelRatio,canvas.height=canvas.height*window.devicePixelRatio;var n=canvas.getContext("2d"),r=e.frequencyBinCount,o=new Float32Array(r),c=Object(_.a)(t),g=c[0],b=c[1];!function t(){var c=canvas.width,l=canvas.height;e.getFloatFrequencyData(o),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,c,l);for(var f=c/r*3,d=0,h=0,i=0;i<r;i++){d=2*(o[i]+140);var v=Math.floor(d+64);n.fillStyle=g%3==0?"rgb(".concat(v,",").concat(g,",").concat(b,")"):g%3==1?"rgb(".concat(g,",").concat(v,",").concat(b,")"):"rgb(".concat(g,",").concat(b,",").concat(v,")"),(d=l/7+d/256*l*6/7)<l/7&&(d=l/7),n.fillRect(h,l-d,f,d),h+=f+2}setTimeout((function(){requestAnimationFrame(t)}),50)}()}}]),n}(h.d);K([Object(h.c)()],Z.prototype,"user",void 0),K([Object(h.c)()],Z.prototype,"muted",void 0);var Q=Z=K([h.a],Z),X=(n(391),n(43)),tt=n(58),et=n.n(tt),nt=n(354),it=n(161),component=Object(X.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("div",{staticClass:"user-card"},[n("div",{staticClass:"top d-flex py-2 pl-4 pr-2"},[n("div",{staticClass:"nickname font-weight-bold",on:{click:t.editName}},[t._v("\n      "+t._s(t.user.nickname)+"\n    ")]),t._v(" "),n("v-btn",{attrs:{icon:"",small:""},on:{click:t.handleMutable}},[n("v-icon",{attrs:{color:this.user.isMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[t._v("\n        "+t._s(this.user.isMuted?t.$icons.mdiMicrophoneOff:t.$icons.mdiMicrophone)+"\n      ")])],1)],1),t._v(" "),n("div",{staticClass:"canvas-wrapper"},[n("canvas",{ref:"canvas",staticClass:"canvas"})]),t._v(" "),n("audio",{ref:"audio",attrs:{autoplay:""}})]):t._e()}),[],!1,null,"22a8cfb5",null),ot=component.exports;function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}et()(component,{VBtn:nt.a,VIcon:it.a});var ct=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},st={dictionaries:[m.a,m.c],separator:" ",length:2},ut=function(t){Object(c.a)(n,t);var e=at(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).loading=!1,t.showNameDialog=!1,t.noMicPermission=!1,t.nickname="",t.roomName="",t.uid="",t.participantMap={},t.participantTrackIdMap={},t.participants=[],t.streams={},t.pc=null,t.copyUtil=H,t}return Object(o.a)(n,[{key:"isAllMuted",get:function(){for(var t=0;t<this.participants.length;t++)if(!this.participants[t].isMuted)return!1;return!0}},{key:"isWeChat",get:function(){return navigator.userAgent.toLowerCase().includes("micromessenger")}},{key:"destination",get:function(){return window.location.href}},{key:"validated",get:function(){return 0!==this.nickname.trim().length}},{key:"cardWidth",get:function(){var t=window.innerWidth;if(t<460){var e=Math.round((t-24-40)/2);return"".concat(e,"px")}return"200px"}},{key:"isEmpty",get:function(){return 1===this.participants.length}},{key:"title",get:function(){return"#".concat(this.roomName)}},{key:"genRandomChannelName",value:function(){var t=Object(m.d)(st);this.nickname=t.slice(0,1).toUpperCase()+t.slice(1)}},{key:"mounted",value:function(){var t=this;setTimeout((function(){t.reload(),t.nickname&&B(t.roomName,t.nickname,t.uid,t.onConnect,t.onDisconnect,t.onResume,t.onError)}),100)}},{key:"reload",value:function(){this.loading=!0;var t=this.$route.params.name;this.chat.rooms.hasOwnProperty(t)?this.nickname=this.chat.rooms[t].nickname:this.showNameDialog=!0,this.uid=this.profile.uid||Object(_.b)(),this.setProfile({uid:this.uid}),this.roomName=t,this.setAppbar({color:"rgba(0, 0, 0, 0.0)",home:!0,back:!1,title:"#".concat(this.roomName)}),this.loading=!1}},{key:"join",value:function(){this.setNickname({room:this.roomName,nickname:this.nickname}),this.showNameDialog=!1,0===this.participants.length?B(this.roomName,this.nickname,this.uid,this.onConnect,this.onDisconnect,this.onResume,this.onError):window.location.reload()}},{key:"onConnect",value:function(t,e,n,r,o,c){this.pc=t,console.log(e,o,c),this.addParticipant(e,n,r,o,c),this.streams[o]=e,this.chat.mutes.hasOwnProperty(o)&&this.muteOrUnmute(o,!0)}},{key:"onDisconnect",value:function(t){var e=this.removeParticipant(t);null!==e&&delete this.streams[e.uid]}},{key:"onError",value:function(t){t&&"NotAllowedError"===t.name?(console.log("no permission"),this.noMicPermission=!0):console.log(t)}},{key:"onResume",value:function(t){var e=this;return new Promise((function(n){console.log("resume from connection",t),e.clearup(),n()}))}},{key:"clearup",value:function(){console.log("clear up"),this.participants.splice(0,this.participants.length),this.participantTrackIdMap={},this.participantMap={},this.streams={}}},{key:"goHome",value:function(){F&&F.close(),$=!1,console.log("stop: "+$),this.clearup()}},{key:"test",value:function(){console.log(this.participantTrackIdMap),console.log(this.participantMap),console.log(this.participants)}},{key:"findParticipant",value:function(t){for(var e=0;e<this.participants.length;e++)if(this.participants[e].uid===t)return{user:this.participants[e],index:e};return null}},{key:"addParticipant",value:function(t,e,n,r,o){var c={stream:t,analyser:e,trackId:n,isMuted:!1,uid:r,nickname:o};this.participantMap.hasOwnProperty(r)||this.participants.push(c),console.log("addParticipant",r,o,n),this.participantMap[r]=c,this.participantTrackIdMap[n]=c}},{key:"removeParticipant",value:function(t){if(!this.participantTrackIdMap.hasOwnProperty(t))return null;var e=this.participantTrackIdMap[t];if(e){var n=this.findParticipant(e.uid);n&&n.user&&(console.log("removeParticipant",e,t),this.participants.splice(n.index,1),delete this.participantMap[e.uid])}return delete this.participantTrackIdMap[t],e}},{key:"editName",value:function(t){t&&this.uid===t.uid&&(this.nickname=t.nickname,this.showNameDialog=!0)}},{key:"muteAll",value:function(){for(var t=this.participants.map((function(t){return t.uid})),e=this.isAllMuted,n=0;n<t.length;n++)this.muteOrUnmute(t[n],!e);e?this.removeMutes(t):this.addMutes(t)}},{key:"muteUser",value:function(t){this.muteOrUnmute(t.uid,!0),this.addMute(t.uid)}},{key:"unmuteUser",value:function(t){this.muteOrUnmute(t.uid,!1),this.removeMute(t.uid)}},{key:"muteOrUnmute",value:function(t,e){if(this.participantMap.hasOwnProperty(t)){console.log("uid=".concat(t,", mute=").concat(e));var n=this.findParticipant(t);n&&n.user&&(n.user.isMuted=e,this.participants.splice(n.index,1,n.user),this.setStream(t,!e))}}},{key:"setStream",value:function(t,e){var n=this.streams[t];n&&n.getTracks().length>0&&(n.getTracks()[0].enabled=e)}}]),n}(Object(h.b)(y.a));ct([Object(v.b)((function(t){return t.app.profile}))],ut.prototype,"profile",void 0),ct([Object(v.b)((function(t){return t.app.chat}))],ut.prototype,"chat",void 0),ct([Object(v.a)("app/SET_NICKNAME")],ut.prototype,"setNickname",void 0),ct([Object(v.a)("app/SET_PROFILE")],ut.prototype,"setProfile",void 0),ct([Object(v.a)("app/SET_APPBAR")],ut.prototype,"setAppbar",void 0),ct([Object(v.a)("app/ADD_MUTE")],ut.prototype,"addMute",void 0),ct([Object(v.a)("app/REMOVE_MUTE")],ut.prototype,"removeMute",void 0),ct([Object(v.a)("app/ADD_MUTES")],ut.prototype,"addMutes",void 0),ct([Object(v.a)("app/REMOVE_MUTES")],ut.prototype,"removeMutes",void 0);var lt=ut=ct([Object(h.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},components:{UserCard:ot}})],ut),ft=(n(393),n(162)),pt=n(134),ht=n(396),vt=n(357),mt=n(399),yt=Object(X.a)(lt,(function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("normal-page-layout",{on:{home:e.goHome}},[r("v-container",{staticClass:"room-page"},[r("f-loading",{attrs:{loading:e.loading,fullscreen:!0}}),e._v(" "),[e.isEmpty?r("div",{staticClass:"hint-box empty-hint px-4 py-2 mx-2 mb-4"},[r("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.empty_block_title")))]),e._v(" "),r("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.empty_block_text"))+"\n        ")]),e._v(" "),r("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.destination,expression:"destination",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return e.copyUtil.onCopy(t)},expression:"() => copyUtil.onCopy(this)",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:function(){return e.copyUtil.onError(t)},expression:"() => copyUtil.onError(this)",arg:"error"}],staticClass:"my-2",attrs:{small:"",outlined:""}},[e._v("\n          "+e._s(e.$t("common.copy_url"))+"\n        ")])],1):r("div",{staticClass:"hint-box caption px-4 py-2 mx-2 mb-4"},[r("v-icon",{attrs:{small:""}},[e._v(e._s(e.$icons.mdiHeadphones))]),e._v("\n        "+e._s(e.$t("room.earhub_block_text"))+"\n      ")],1),e._v(" "),e.noMicPermission?r("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[r("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.error_block_title")))]),e._v(" "),r("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.error_block_text"))+"\n        ")])]):e._e(),e._v(" "),e.isWeChat?r("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[r("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.wechat_error_block_title")))]),e._v(" "),r("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.wechat_error_block_text"))+"\n        ")])]):e._e(),e._v(" "),r("div",{staticClass:"cards"},e._l(e.participants,(function(t){return r("div",{key:t.uid,staticClass:"user-card-wrapper ma-2",style:{width:e.cardWidth}},[r("user-card",{attrs:{user:t},on:{mute:e.muteUser,unmute:e.unmuteUser,"edit-name":e.editName}})],1)})),0)]],2),e._v(" "),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.showNameDialog,callback:function(t){e.showNameDialog=t},expression:"showNameDialog"}},[r("v-card",[r("v-card-title",{staticClass:"title-2"},[e._v(e._s(e.$t("room.name_dialog_title")))]),e._v(" "),r("v-card-text",{staticClass:"mb-0"},[r("div",{staticClass:"mb-4"},[r("v-text-field",{attrs:{label:e.$t("room.name_dialog_placeholder"),"hide-details":!0},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{icon:""},on:{click:e.genRandomChannelName}},[r("v-icon",[e._v("\n                  "+e._s(e.$icons.mdiDice3)+"\n                ")])],1)]},proxy:!0}]),model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)]),e._v(" "),r("v-card-actions",{staticClass:"px-5 pb-5"},[r("v-btn",{attrs:{color:"primary",block:"",rounded:"",disabled:!e.validated},on:{click:e.join}},[e._v("\n          "+e._s(e.$t("room.name_dialog_btn"))+"\n        ")])],1)],1)],1),e._v(" "),r("v-btn",{staticClass:"mute-all-btn",attrs:{color:"rgba(255, 255, 255, 0.2)",dark:"",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:e.muteAll}},[r("v-icon",{attrs:{color:this.isAllMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[e._v("\n      "+e._s(this.isAllMuted?e.$icons.mdiMicrophoneOff:e.$icons.mdiMicrophone)+"\n    ")])],1)],1)}),[],!1,null,"7612d705",null);e.default=yt.exports;et()(yt,{VBtn:nt.a,VCard:ft.a,VCardActions:pt.a,VCardText:pt.b,VCardTitle:pt.c,VContainer:ht.a,VDialog:vt.a,VIcon:it.a,VTextField:mt.a})}}]);